---
const title = "Blog";
const banner = "banner";

import SimpleLayout from '../../layouts/SimpleLayout.astro';
import DevlogShowcase from '../../components/devlogShowcase.astro';

import { getCollection } from 'astro:content';
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const tags = [...new Set(posts.map((post: any) => post.data.tags).flat())];
---

<style>
  .tags {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .tag {
    margin: 5px;
    padding: 0 5px;
  }
</style>

<SimpleLayout title={title} banner={banner} navCode={title}>
  <div style="display: block; height: 1rem;"></div>
  <div class="fixed-width mh-auto" style="--fixed-width-min:80vw; --fixed-width-min:95vw;">
    <div class="grid-container grid-min-size" style="--grid-column-min-size: 454px">
      <div style="grid-column: span 2;">
        <h2 class="center">Posts</h2>
        <DevlogShowcase startPost=0 maxPosts=10 posts={posts} />
      </div>
      <div style="grid-column: span 1;">
        <h2 class="center">Tag List</h2>
          <div class="tags">
            {tags.map((tag) => (
              <a href={`/tags/${tag}`} class="btn purple tag">ğŸŒ™{tag}ğŸŒ™</a>
            ))}
          </div>
      </div>
    </div>
  </div>
  <div style="display: block; height: 1rem;"></div>
</SimpleLayout>
